(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{356:function(e){e.exports={a:"0.4.0"}},361:function(e,t,n){e.exports=n(865)},366:function(e,t,n){},369:function(e,t,n){},518:function(e,t,n){},529:function(e,t){},531:function(e,t){},563:function(e,t){},564:function(e,t){},785:function(e,t,n){},787:function(e,t,n){},789:function(e,t,n){},865:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(53),i=n.n(o),c=(n(366),n(872)),s=n(5),l=n(9),u=n(13),d=n(8),h=n(14),p=(n(368),n(369),n(873)),m=n(870),f=n(64),v=n(34),b=n(162),j=n.n(b),g=n(163),y=n.n(g),O=n(40),E=n.n(O),w=n(133),N=n.n(w),S=n(58),k=n.n(S),C=n(161),P=n.n(C),D=n(35),x=n(31),R=n.n(x),$=n(359),M=n(871),A="localhost",T="http://".concat(A,":").concat("8080"),L="".concat(T,"/api"),I="".concat(L,"/graphql"),F=new M.a,_=new $.a({uri:I,cache:F});function q(){var e=Object(D.a)(["\n        mutation($projectName: String!) {\n          deleteProject(projectName: $projectName)\n        }\n      "]);return q=function(){return e},e}function K(){var e=Object(D.a)(["\n        mutation($projectCreationDescription: ProjectCreationDescription!) {\n          createProject(description: $projectCreationDescription) {\n            description\n          }\n        }\n      "]);return K=function(){return e},e}function V(){var e=Object(D.a)(["\n        query {\n          viewer {\n            projects(first: 10, after: null) {\n              edges {\n                node {\n                  name\n                }\n              }\n            }\n          }\n        }\n      "]);return V=function(){return e},e}var B=function e(t,n){Object(s.a)(this,e),this.name=t,this.description=n};var U=n(104),Y=n.n(U),W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={project:"",saving:!1,error:!1},n.handleSave=function(){var e;n.setState({saving:!0}),(e=n.state.project,_.mutate({mutation:R()(K()),variables:{projectCreationDescription:{kind:"default",name:e}}}).then(function(e){return _.resetStore(),void 0!==e.data.createProject})).then(function(e){e?n.props.onSubmit():n.setState({saving:!1,error:!0})})},n.handleSubmit=function(e){e.preventDefault(),n.handleSave()},n.handleChange=function(e){n.setState({project:e.target.value})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:e.container,noValidate:!0,autoComplete:"off"},r.a.createElement(P.a,{id:"standard-full-width",label:"Name",style:{margin:8},onChange:this.handleChange,placeholder:"Edit the project name here",fullWidth:!0,margin:"normal"}),r.a.createElement("div",{className:e.buttons},r.a.createElement(k.a,{color:"primary",className:e.button,component:"span",onClick:this.handleSave},r.a.createElement(Y.a,null),"Save")))}}]),t}(r.a.Component),z=Object(v.withStyles)(function(e){return{container:{display:"flex"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200},iconSmall:{fontSize:20},buttons:{display:"flex",justifyContent:"flex-end",width:"100 %"},button:{marginTop:3*e.spacing.unit,marginLeft:e.spacing.unit}}})(W),H=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleAddProject=function(){n.props.onRefresh(),n.setState({open:!1})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("span",null,r.a.createElement(j.a,{color:"primary","aria-label":"Add",className:e.fab,onClick:this.handleOpen},r.a.createElement(y.a,null)),r.a.createElement(N.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:e.paper},r.a.createElement(E.a,{variant:"h6",id:"modal-title"},"Create a project"),r.a.createElement(E.a,{variant:"subtitle1",id:"simple-modal-description"}),r.a.createElement(z,{onSubmit:this.handleAddProject}))))}}]),t}(r.a.Component),J=Object(v.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",top:"25%",left:"25%"}}})(H),G=n(159),Z=n.n(G),X=n(346),Q=n.n(X),ee=n(168),te=n.n(ee),ne=n(347),ae=n.n(ne),re=n(869),oe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.projectName,a=void 0!==this.props.resourcePath?this.props.resourcePath.split("/"):[],o=[],i="",c=!0,s=!1,l=void 0;try{for(var u,d=a[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value;i+="/"+encodeURIComponent(h),o.push({path:i,name:h})}}catch(p){s=!0,l=p}finally{try{c||null==d.return||d.return()}finally{if(s)throw l}}return r.a.createElement(Z.a,{className:t.root},r.a.createElement(Q.a,{"arial-label":"Breadcrumb"},r.a.createElement(te.a,{component:re.a,color:"inherit",to:"/",className:t.link},r.a.createElement(ae.a,{className:t.icon})),void 0!==n&&r.a.createElement(te.a,{component:re.a,color:"inherit",to:"/"+n,className:t.link},r.a.createElement(E.a,{color:"textPrimary",className:t.link},n)),o.map(function(e){return r.a.createElement(te.a,{component:re.a,color:"inherit",to:"/"+n+e.path,className:t.link,key:e.path},r.a.createElement(E.a,{color:"textPrimary",className:t.link,key:e.name},e.name))}),void 0!==this.props.representationName&&r.a.createElement(E.a,{color:"textPrimary",className:t.link},this.props.representationName)))}}]),t}(a.Component),ie=Object(v.withStyles)(function(e){return{root:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},link:{display:"flex"},icon:{marginRight:e.spacing.unit/2,width:20,height:20}}})(oe),ce=n(63),se=n.n(ce),le=n(72),ue=n.n(le),de=n(73),he=n.n(de),pe=n(76),me=n.n(pe),fe=n(105),ve=n.n(fe),be=n(74),je=n.n(be),ge=n(106),ye=n.n(ge),Oe=n(75),Ee=n.n(Oe),we=n(874),Ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleRefresh=function(){n.refresh()},n.state={projects:[]},n.handleDelete=n.handleDelete.bind(Object(f.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;_.query({query:R()(V())}).then(function(e){var t=e.data.viewer.projects.edges,n=[];return t.forEach(function(e){var t=e.node.name,a=e.node.description;n.push(new B(t,a))}),n}).then(function(t){e.setState({projects:t})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ie,null),r.a.createElement(se.a,{component:"nav"},this.state.projects.map(function(t){return r.a.createElement(ue.a,{button:!0,key:t.name,onClick:function(){e.props.history.push("/"+t.name)}},r.a.createElement(he.a,null,r.a.createElement(je.a,null,r.a.createElement(Ee.a,null))),r.a.createElement(me.a,{primary:t.name}),r.a.createElement(ve.a,null,r.a.createElement(k.a,{"aria-label":"Delete",onClick:e.handleDelete.bind(e,t.name)},r.a.createElement(ye.a,null))))})),r.a.createElement(J,{onRefresh:this.handleRefresh.bind(this)}))}},{key:"handleDelete",value:function(e){var t=this;(function(e){return _.mutate({mutation:R()(q()),variables:{projectName:e}}).then(function(e){return _.resetStore(),void 0!==e.data.deleteProject})})(e).then(function(e){e&&t.refresh()})}}]),t}(a.Component),Se=Object(we.a)(Ne),ke=n(167),Ce=n(107),Pe=n.n(Ce),De=function e(t,n,a,r){Object(s.a)(this,e),this.project=t,this.name=n,this.path=a,this.isFolder=r};function xe(){var e=Object(D.a)(["\n        mutation(\n          $projectName: String!\n          $containerPath: String!\n          $fileName: String!\n        ) {\n          deleteFile(\n            projectName: $projectName\n            containerPath: $containerPath\n            fileName: $fileName\n          )\n        }\n      "]);return xe=function(){return e},e}function Re(){var e=Object(D.a)(["\n        mutation(\n          $projectName: String!\n          $containerPath: String!\n          $description: FileCreationDescription!\n        ) {\n          createFile(\n            projectName: $projectName\n            containerPath: $containerPath\n            description: $description\n          ) {\n            name\n          }\n        }\n      "]);return Re=function(){return e},e}function $e(){var e=Object(D.a)(["\n        mutation($projectName: String!, $filePath: String!, $content: String!) {\n          updateTextFile(\n            projectName: $projectName\n            filePath: $filePath\n            description: { content: $content }\n          ) {\n            name\n          }\n        }\n      "]);return $e=function(){return e},e}function Me(){var e=Object(D.a)(["\n        query($projectName: String!, $filePath: String!) {\n          viewer {\n            project(name: $projectName) {\n              resourceByPath(path: $filePath) {\n                ... on File {\n                  content\n                }\n              }\n            }\n          }\n        }\n      "]);return Me=function(){return e},e}function Ae(e){return _.query({query:R()(Me()),variables:{projectName:e.project,filePath:e.path}}).then(function(e){var t="";return void 0!==e.data.viewer.project&&(t=e.data.viewer.project.resourceByPath.content),t})}function Te(){var e=Object(D.a)(["\n        mutation(\n          $projectName: String!\n          $containerPath: String!\n          $folderName: String!\n        ) {\n          createFolder(\n            projectName: $projectName\n            containerPath: $containerPath\n            name: $folderName\n          ) {\n            name\n          }\n        }\n      "]);return Te=function(){return e},e}function Le(){var e=Object(D.a)(["\n        mutation(\n          $projectName: String!\n          $containerPath: String!\n          $folderName: String!\n        ) {\n          deleteFolder(\n            projectName: $projectName\n            containerPath: $containerPath\n            name: $folderName\n          )\n        }\n      "]);return Le=function(){return e},e}var Ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSave=function(){n.setState({saving:!0}),(n.props.folder?function(e,t){var n,a;return e instanceof De?(n=e.project,a=e.path):(n=e,a=""),_.mutate({mutation:R()(Te()),variables:{projectName:n,containerPath:a,folderName:t}}).then(function(e){return _.resetStore(),void 0!==e.data.createFolder})}(n.props.container,n.state.resourceName):function(e,t){var n,a;return e instanceof De?(n=e.project,a=e.path):(n=e,a=""),_.mutate({mutation:R()(Re()),variables:{projectName:n,containerPath:a,description:{kind:"plain/text",name:t}}}).then(function(e){return _.resetStore(),void 0!==e.data.createFile})}(n.props.container,n.state.resourceName)).then(function(e){e?n.props.onSubmit():n.setState({saving:!1,error:!0})})},n.handleSubmit=function(e){e.preventDefault(),n.handleSave()},n.handleChange=function(e){n.setState({resourceName:e.target.value})},n.state={resourceName:"",saving:!1,error:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.folder,a=(e.container,n?"Edit the folder name here":" Edit the file name here");return r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(P.a,{id:"standard-full-width",label:"Name",style:{margin:8},onChange:this.handleChange,placeholder:a,fullWidth:!0,margin:"normal"}),r.a.createElement("div",{className:t.buttons},r.a.createElement(k.a,{color:"primary",className:t.button,component:"span",onClick:this.handleSave},r.a.createElement(Y.a,null),"Save")))}}]),t}(a.Component),Fe=Object(v.withStyles)(function(e){return{container:{display:"flex"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200},iconSmall:{fontSize:20},buttons:{display:"flex",justifyContent:"flex-end",width:"100 %"},button:{marginTop:3*e.spacing.unit,marginLeft:e.spacing.unit}}})(Ie),_e=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleAddResource=function(){n.props.onRefresh(),n.setState({open:!1})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.folder,a=Object(ke.a)(e,["classes","folder"]),o=n?" Create a folder":" Create a file";return r.a.createElement("span",null,r.a.createElement(j.a,{color:"primary","aria-label":"Add",className:t.fab,onClick:this.handleOpen},r.a.createElement(y.a,null),n?r.a.createElement(Ee.a,null):r.a.createElement(Pe.a,null)),r.a.createElement(N.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:t.paper},r.a.createElement(E.a,{variant:"h6",id:"modal-title"},o),r.a.createElement(E.a,{variant:"subtitle1",id:"simple-modal-description"}),r.a.createElement(Fe,Object.assign({folder:n},a,{onSubmit:this.handleAddResource})))))}}]),t}(r.a.Component),qe=Object(v.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",top:"25%",left:"25%"}}})(_e);function Ke(){var e=Object(D.a)(["\n        query($projectName: String!, $filePath: String!) {\n          viewer {\n            project(name: $projectName) {\n              resourceByPath(path: $filePath) {\n                name\n                path\n                __typename\n              }\n            }\n          }\n        }\n      "]);return Ke=function(){return e},e}function Ve(){var e=Object(D.a)(["\n        query($projectName: String!, $filePath: String!) {\n          viewer {\n            project(name: $projectName) {\n              resourceByPath(path: $filePath) {\n                ... on Folder {\n                  resources(first: 10, after: null) {\n                    edges {\n                      node {\n                        name\n                        path\n                        __typename\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return Ve=function(){return e},e}function Be(){var e=Object(D.a)(["\n        query($projectName: String!) {\n          viewer {\n            project(name: $projectName) {\n              resources(first: 10, after: null) {\n                edges {\n                  node {\n                    name\n                    path\n                    __typename\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return Be=function(){return e},e}function Ue(e){return e.isFolder?function(e){var t=e.path.lastIndexOf("/"),n=t>0?e.path.substr(0,t):"";return _.mutate({mutation:R()(Le()),variables:{projectName:e.project,containerPath:n,folderName:e.name}}).then(function(e){return _.resetStore(),void 0!==e.data.deleteFolder})}(e):function(e){var t=e.path.lastIndexOf("/"),n=t>0?e.path.substr(0,t):"";return _.mutate({mutation:R()(xe()),variables:{projectName:e.project,containerPath:n,fileName:e.name}}).then(function(e){return _.resetStore(),void 0!==e.data.deleteFile})}(e)}var Ye=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleRefresh=function(){n.refresh()},n.state={resources:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ie,{projectName:this.props.projectName}),r.a.createElement(se.a,{component:"nav"},this.state.resources.map(function(t){return r.a.createElement(ue.a,{button:!0,key:t.path,onClick:function(){e.props.history.push("/"+e.props.projectName+"/"+encodeURIComponent(t.path))}},r.a.createElement(he.a,null,r.a.createElement(je.a,null,t.isFolder?r.a.createElement(Ee.a,null):r.a.createElement(Pe.a,null))),r.a.createElement(me.a,{primary:t.name}),r.a.createElement(ve.a,null,r.a.createElement(k.a,{"aria-label":"Delete",onClick:e.handleDelete.bind(e,t)},r.a.createElement(ye.a,null))))})),r.a.createElement(qe,Object.assign({},this.props,{container:this.props.projectName,onRefresh:this.handleRefresh.bind(this)})),r.a.createElement(qe,Object.assign({},this.props,{folder:!0,container:this.props.projectName,onRefresh:this.handleRefresh.bind(this)})))}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e,t=this;(e=this.props.projectName,_.query({query:R()(Be()),variables:{projectName:e}}).then(function(t){var n=t.data.viewer.project.resources.edges,a=[];return n.forEach(function(t){var n=t.node.name,r=t.node.path,o=t.node.__typename;a.push(new De(e,n,r,"Folder"===o))}),a})).then(function(e){t.setState({resources:e})})}},{key:"handleDelete",value:function(e){var t=this;Ue(e).then(function(e){e&&t.refresh()})}}]),t}(a.Component),We=Object(we.a)(Ye),ze=(n(518),n(18)),He=n.n(ze),Je=n(41);function Ge(e,t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new Je.MonacoToProtocolConverter,r=new Je.ProtocolToMonacoConverter;return{commands:new Je.MonacoCommands(e),languages:new Ze(r,a,t),workspace:new Je.MonacoWorkspace(r,a,n.rootUri),window:new Je.ConsoleWindow}}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return Je.Services.install(n),n}var Ze=function(e){function t(e,n,a){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(d.a)(t).call(this,e,n))).p2m=e,r.m2p=n,r.latexListener=a,r}return Object(h.a)(t,e),Object(l.a)(t,[{key:"createDocumentHighlightProvider",value:function(e,t){var n=this;return{provideDocumentHighlights:function(a,r,o){if(!n.matchModel(e,Je.MonacoModelIdentifier.fromModel(a)))return[];var i=n.m2p.asTextDocumentPositionParams(a,r);return t.provideDocumentHighlights(i,o).then(function(e){var t=n.p2m.asDocumentHighlights(e);return e.length>0&&void 0!==e[0].formula&&n.latexListener(e[0].formula),t})}}}}]),t}(Je.MonacoLanguages),Xe=n(350),Qe=n(864),et=n(771),tt=n(313);Qe.languages.register({id:"nabla",extensions:[".nabla"],aliases:["nabla".toUpperCase(),"nabla"],mimetypes:["text/nabla"]}),Qe.languages.setMonarchTokensProvider("nabla",{keywords:["\u2115","\u211d","\u211d\xb2","\u211d\xb2\u02e3\xb2","\u211d\xb3","\u211d\xb3\u02e3\xb3","\u213e","\u2192","\u2200","\u2205","\u2208","\u25ba","\u25c4","cell","connectivities","const","else","face","false","functions","if","module","node","true","with"],typeKeywords:["boolean","double","byte","int","short","char","void","long","float"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-zA-Z\u0394-\u03F2\u220F-\u221C_][a-zA-Z\u0394-\u03F20-9\u2211_]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation",log:"annotation token: $0"}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}});var nt=function(){function e(){Object(s.a)(this,e),this.service=void 0}return Object(l.a)(e,[{key:"createLSPEditor",value:function(e,t,n,a){var r=this,o=Qe.editor.createModel(n,"nabla",Qe.Uri.parse("platform:/resource/".concat(t.project,"/").concat(t.path))),i=Qe.editor.create(e,{model:o,glyphMargin:!0,lightbulb:{enabled:!0}}),c=this.createUrl(A,"8080"),s=new tt(c,void 0,{maxReconnectionDelay:1e4,minReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:1e4,maxRetries:1/0,debug:!1});return Object(Xe.listen)({webSocket:s,onConnection:function(e){var t=r.createLanguageClient(e).start();e.onClose(function(){return t.dispose()})}}),this.service=Ge(i,a),i}},{key:"deleteLSPEditor",value:function(e){Je.Services.get();var t=e.getModel();null!==t&&t.dispose(),e.dispose(),window[Symbol("Services")]=void 0}},{key:"createLanguageClient",value:function(e){return new Je.MonacoLanguageClient({name:"NabLab",clientOptions:{documentSelector:["nabla"],errorHandler:{error:function(){return Je.ErrorAction.Continue},closed:function(){return Je.CloseAction.DoNotRestart}}},connectionProvider:{get:function(t,n){return Promise.resolve(Object(Je.createConnection)(e,t,n))}}})}},{key:"createUrl",value:function(e,t){var n="https:"===location.protocol?"wss":"ws";return et("".concat(n,"://").concat(e,":").concat(t,"/").concat("nabla","/lsp"))}}]),e}(),at=n(354),rt=n.n(at),ot=n(351),it=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).editorDom=void 0,n.editor=void 0,n.lspService=void 0,n.state={formula:null},n.lspService=new nt,n.editorDom=r.a.createRef(),n.editor=null,n.save=n.save.bind(Object(f.a)(n)),n.handleKeyDown=n.handleKeyDown.bind(Object(f.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.editorDom.current,n=this.props.resource;null!==t&&Ae(n).then(function(a){e.editor=e.lspService.createLSPEditor(t,n,a,function(t){e.setState({formula:"$$"+t+"$$"})});e.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_S,function(){alert("SAVE pressed!")},"toto")})}},{key:"componentWillUnmount",value:function(){null!==this.editor&&this.lspService.deleteLSPEditor(this.editor)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.formula;return r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement("div",{className:e.buttonsWrapper},r.a.createElement(rt.a,{variant:"contained",size:"small",className:e.button,onClick:this.save},r.a.createElement(Y.a,{className:He()(e.leftIcon,e.iconSmall)}),"Save")),r.a.createElement("div",{ref:this.editorDom,className:"editor"}),r.a.createElement("div",null,void 0!==t&&null!==t&&r.a.createElement(ot.a,{math:t})))}},{key:"handleKeyDown",value:function(e){console.log(e)}},{key:"save",value:function(e){if(null!==this.editor){var t=this.editor.getModel();if(null!==t){var n=this.props.resource;(a=n,r=t.getValue(),_.mutate({mutation:R()($e()),variables:{projectName:a.project,filePath:a.path,content:r}}).then(function(e){return _.resetStore(),void 0!==e.data.updateTextFile})).then(function(){console.log("Saved")})}}var a,r}}]),t}(a.Component),ct=Object(v.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},button:{margin:"10px"},buttonsWrapper:{"text-align":"left"}}})(it),st=n(77),lt=n.n(st),ut=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={content:null},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.content;return void 0!==e&&null!==e?r.a.createElement("pre",null,e):r.a.createElement(lt.a,null)}},{key:"componentDidMount",value:function(){var e=this;Ae(this.props.resource).then(function(t){e.setState({content:t})})}}]),t}(a.Component),dt=function e(t,n,a,r){Object(s.a)(this,e),this.project=t,this.name=n,this.path=a,this.representations=r},ht=function e(t,n,a){Object(s.a)(this,e),this.id=t,this.name=n,this.desc=a},pt=function e(t,n){Object(s.a)(this,e),this.representationName=t,this.viewpointName=n};function mt(){var e=Object(D.a)(["\n        query($projectName: String!, $filePath: String!) {\n          viewer {\n            project(name: $projectName) {\n              resourceByPath(path: $filePath) {\n                ... on File {\n                  representations(first: 10, after: null) {\n                    edges {\n                      node {\n                        ... on Diagram {\n                          name\n                          description {\n                            identifier\n                            viewpoint {\n                              identifier\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return mt=function(){return e},e}function ft(e){return _.query({query:R()(mt()),variables:{projectName:e.project,filePath:e.path}}).then(function(t){var n=[];if(void 0!==t.data.viewer.project.resourceByPath.representations.edges){var a=t.data.viewer.project.resourceByPath.representations.edges,r=1;a.forEach(function(e){n.push(new ht(e.node.name+r,e.node.name,new pt(e.node.description.name,e.node.description.viewpoint.name))),r++})}return new dt(e.project,e.name,e.path,n)})}var vt=n(355),bt=n.n(vt),jt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={content:null,airdResource:null},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.airdResource;return void 0!==t&&null!==t?r.a.createElement("div",null,r.a.createElement(se.a,{component:"nav"},t.representations.map(function(n){return r.a.createElement(ue.a,{button:!0,key:n.id,onClick:function(){e.props.history.push("/"+t.project+"/"+encodeURIComponent(t.path)+"/"+encodeURIComponent(n.name))}},r.a.createElement(he.a,null,r.a.createElement(je.a,null,r.a.createElement(bt.a,null))),r.a.createElement(me.a,{primary:n.name}))}))):r.a.createElement(lt.a,null)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.resource;ft(t).then(function(t){e.setState({airdResource:t})}),Ae(t).then(function(t){e.setState({content:t})})}}]),t}(a.Component),gt=Object(we.a)(jt),yt=(n(785),n(787),n(789),n(6)),Ot=function e(){Object(s.a)(this,e),this.kind=e.KIND};Ot.KIND="requestLayers";var Et=function e(){Object(s.a)(this,e),this.kind=e.KIND};Et.KIND="requestTools";var wt=function e(t){Object(s.a)(this,e),this.kind=e.KIND,this.layers=void 0,this.layers=t};wt.KIND="setLayers";var Nt=function e(t){Object(s.a)(this,e),this.kind=e.KIND,this.tools=void 0,this.tools=t};Nt.KIND="setTools";var St=n(10),kt=n(226),Ct=n(30),Pt={createElement:Ct.svg},Dt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderLine",value:function(e,t,n){var a=e.style,r=JSON.parse(a);switch(r.fill="transparent",e.lineStyle){case 1:r["stroke-dasharray"]="10,10";break;case 2:r["stroke-dasharray"]="3,3";break;case 3:r["stroke-dasharray"]="20,10,3,3,3,10"}for(var o=t[0],i=void 0!==r?r["stroke-width"]:1,c="M ".concat(o.x+i,",").concat(o.y),s=1;s<t.length;s++){var l=t[s];c+=" L ".concat(l.x-i,",").concat(l.y)}return Pt.createElement("path",{"class-sprotty-edge":!0,d:c,style:r},null)}},{key:"renderAdditionals",value:function(e,t,n){var a=this.renderSource(e,t,n),r=this.renderTarget(e,t,n);return[].concat(Object(kt.a)(a),Object(kt.a)(r))}},{key:"renderSource",value:function(e,t,n){var a=t[1],r=t[0],o=e.style,i=JSON.parse(o);return this.renderArrow(a,r,e.sourceArrow,i)}},{key:"renderTarget",value:function(e,t,n){var a=t[t.length-2],r=t[t.length-1],o=e.style,i=JSON.parse(o);return this.renderArrow(a,r,e.targetArrow,i)}},{key:"renderArrow",value:function(e,t,n,a){var r=void 0!==a?a["stroke-width"]:1;switch(n){case 1:case 2:var o=1===n;a.fill="transparent";var i=o?-7+r:-7-r,c=t.x+i,s=t.y+-3.5,l=o?Object(yt.toDegrees)(Object(yt.angle)(t,e)):Object(yt.toDegrees)(Object(yt.angle)(e,t)),u=t.x,d=t.y;return[this.buildPath("M 0,0 7,3.5 0,7",c,s,a,l,u,d)];case 3:case 4:case 5:case 6:var h=3===n||5===n,p=5===n||6===n;a.fill=p?a.stroke:"white";var m=h?0+r:-7-r,f=t.x+m,v=t.y+-3.5,b=h?Object(yt.toDegrees)(Object(yt.angle)(t,e)):Object(yt.toDegrees)(Object(yt.angle)(e,t)),j=t.x,g=t.y;return[this.buildPath("M 0,0 7,3.5 0,7z",f,v,a,b,j,g)];case 7:case 8:var y=8===n;a.fill=y?a.stroke:"white";var O=0+r,E=t.x+O,w=t.y+0,N=Object(yt.toDegrees)(Object(yt.angle)(t,e)),S=t.x,k=t.y;return[this.buildPath("M 0,0 L 7,-3.5 L 14,0 L 7,3.5 z",E,w,a,N,S,k)];case 9:case 10:var C=10===n;a.fill=C?a.stroke:"white";var P=0+r,D=t.x+P,x=t.y+0,R=Object(yt.toDegrees)(Object(yt.angle)(t,e)),$=t.x,M=t.y;return[this.buildPath("M 0,0 L 7,-3.5 L 14,0 L 7,3.5 z M 14,0 21,-3.5 14,0 21,3.5",D,x,a,R,$,M)];default:return[]}}},{key:"buildPath",value:function(e,t,n,a,r,o,i){var c="";void 0!==r&&(c=void 0!==o&&void 0!==i?"rotate(".concat(r," ").concat(o," ").concat(i,")"):"rotate(".concat(r,")"));var s="".concat(c," translate(").concat(t," ").concat(n,")");return Pt.createElement("path",{"class-edge":!0,"class-arrow":!0,d:e,transform:s,style:a},null)}}]),t}(yt.PolylineEdgeView),xt={createElement:Ct.svg},Rt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.style,a=JSON.parse(n),r=xt.createElement("rect",{"class-selected":e.selected,"class-mouseover":e.hoverFeedback,x:0,y:0,rx:"5",ry:"5",width:Math.max(0,e.bounds.width),height:Math.max(0,e.bounds.height),style:a},null);return xt.createElement("g",null,[r,t.renderChildren(e)])}}]),t}(yt.RectangularNodeView),$t={createElement:Ct.svg},Mt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.style,a=JSON.parse(n),r=$t.createElement("rect",{"class-selected":e.selected,"class-mouseover":e.hoverFeedback,x:0,y:0,rx:"5",ry:"5",width:Math.max(0,e.bounds.width),height:Math.max(0,e.bounds.height),style:a},null);return $t.createElement("g",null,[r,t.renderChildren(e)])}}]),t}(yt.RectangularNodeView),At={createElement:Ct.svg},Tt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.style,a=JSON.parse(n),r=At.createElement("rect",{"class-selected":e.selected,"class-mouseover":e.hoverFeedback,x:0,y:0,rx:"5",ry:"5",width:Math.max(0,e.bounds.width),height:Math.max(0,e.bounds.height),style:a},null);return At.createElement("g",null,[r,t.renderChildren(e)])}}]),t}(yt.RectangularNodeView),Lt={createElement:Ct.svg},It=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.url,a=Lt.createElement("image",{x:0,y:0,width:"10",height:"10",href:n},null);return Lt.createElement("g",null,a)}}]),t}(yt.RectangularNodeView),Ft=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.style,a={"class-sprotty-label":!0,style:JSON.parse(n)},r=Ct.svg("text",a,e.text),o=Object(yt.getSubType)(e);return o&&Object(yt.setAttr)(r,"class",o),r}}]),t}(yt.SLabelView),_t={createElement:Ct.svg},qt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.style,a=JSON.parse(n),r=_t.createElement("rect",{"class-selected":e.selected,"class-mouseover":e.hoverFeedback,x:0,y:0,rx:"5",ry:"5",width:Math.max(0,e.bounds.width),height:Math.max(0,e.bounds.height),style:a},null);return _t.createElement("g",null,[r,t.renderChildren(e)])}}]),t}(yt.RectangularNodeView),Kt={createElement:Ct.svg},Vt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e,t){var n=e.svgData,a=Kt.createElement("image",{x:0,y:0,width:30,height:30,href:"data:image/svg+xml;utf,".concat(n)},null);return Kt.createElement("g",null,[a,t.renderChildren(e)])}}]),t}(yt.RectangularNodeView),Bt=n(115),Ut=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"createElement",value:function(e,n){return this.isPreRenderedSchema(e)?this.initializeChild(new yt.PreRenderedElement,e,n):Object(Bt.a)(Object(d.a)(t.prototype),"createElement",this).call(this,e,n)}},{key:"createRoot",value:function(e){return this.isHtmlRootSchema(e)?this.initializeRoot(new yt.HtmlRoot,e):Object(Bt.a)(Object(d.a)(t.prototype),"createRoot",this).call(this,e)}},{key:"isHtmlRootSchema",value:function(e){return"html"===Object(yt.getBasicType)(e)}},{key:"isPreRenderedSchema",value:function(e){return"pre-rendered"===Object(yt.getBasicType)(e)}}]),t}(yt.SGraphFactory),Yt=function(e,t){if(void 0!==t&&"node:svg"===t.type)return{type:"html",id:"popup",children:[{type:"pre-rendered",id:"popup-title",code:'<div class="popup-title">Class '.concat("node0"===t.id?"Foo":"Bar","</div>")},{type:"pre-rendered",id:"popup-body",code:'<div class="popup-body">Hello World</div>'}]}},Wt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"initialize",value:function(e){Object(Bt.a)(Object(d.a)(t.prototype),"initialize",this).call(this,e)}},{key:"handle",value:function(e){e.kind,Object(Bt.a)(Object(d.a)(t.prototype),"handle",this).call(this,e)}}]),t}(yt.WebSocketDiagramServer),zt=new St.ContainerModule(function(e,t,n,a){a(yt.TYPES.ILogger).to(yt.ConsoleLogger).inSingletonScope(),a(yt.TYPES.LogLevel).toConstantValue(yt.LogLevel.log),a(yt.TYPES.IModelFactory).to(Ut).inSingletonScope(),e(yt.TYPES.PopupModelFactory).toConstantValue(Yt)}),Ht=function(e){var t=new St.Container;t.load(yt.defaultModule,yt.selectModule,yt.moveModule,yt.boundsModule,yt.undoRedoModule,yt.viewportModule,yt.hoverModule,yt.exportModule,zt),t.bind(yt.TYPES.ModelSource).to(Wt).inSingletonScope(),Object(yt.overrideViewerOptions)(t,{needsClientLayout:!0,needsServerLayout:!0,baseDiv:e,hiddenDiv:e+"-hidden"});var n=t.get(yt.TYPES.ViewRegistry);return n.register("graph",yt.SGraphView),n.register("node:square",qt),n.register("node:svg",Vt),n.register("port:square",Tt),n.register("port:image",It),n.register("node:freeformflatcontainer",Rt),n.register("node:listflatcontainer",Mt),n.register("comp:listflatcontainer_label",yt.SCompartmentView),n.register("comp:listflatcontainer_body",yt.SCompartmentView),n.register("edge:straight",Dt),n.register("label:inside-left",Ft),n.register("label:inside-center",Ft),n.register("label:inside-right",Ft),n.register("label:outside-left",Ft),n.register("label:outside-center",Ft),n.register("label:outside-right",Ft),n.register("label:text",yt.SLabelView),n.register("comp:main",yt.SCompartmentView),n.register("html",yt.HtmlRootView),n.register("pre-rendered",yt.PreRenderedView),t},Jt=function e(t){Object(s.a)(this,e),this.kind=e.KIND,this.toolName=void 0,this.toolName=t};Jt.KIND="executeContainerCreationTool",Jt.TYPE="ContainerCreationDescriptionImpl";var Gt=function e(t){Object(s.a)(this,e),this.kind=e.KIND,this.toolName=void 0,this.toolName=t};Gt.KIND="executeNodeCreationTool",Gt.TYPE="NodeCreationDescriptionImpl";var Zt=function e(t){Object(s.a)(this,e),this.kind=e.KIND,this.toolName=void 0,this.toolName=t};Zt.KIND="executeTool",Zt.TYPE="ToolDescriptionImpl";var Xt=function e(t,n){Object(s.a)(this,e),this.kind=e.KIND,this.layerName=void 0,this.newState=void 0,this.layerName=t,this.newState=n};function Qt(e,t){var n=document.getElementById("tools-palette");null!==n&&t.forEach(function(t){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("class","tool");var r=t.name||t.id,o=document.createElement("img"),i="assets/ToolDescription.gif";r.includes("Woman")?i="assets/woman.svg":r.includes("Man")?i="assets/man.svg":r.includes("New customer")?i="assets/LaneSet.png":r.includes("Start")?i="assets/start.svg":r.includes("Select")?i="assets/Task.svg":r.includes("Order")?i="assets/Task.svg":r.includes("Wait")?i="assets/event-based-gateway.svg":r.includes("Eat")&&(i="assets/end.svg"),o.setAttribute("src",i),a.appendChild(o);var c=document.createElement("label");c.textContent=r,a.appendChild(c),a.addEventListener("click",function(n){var a=function(e){var t=null;switch(e.toolType){case Gt.TYPE:t=new Gt(e.id);break;case Jt.TYPE:t=new Jt(e.id);break;case Zt.TYPE:t=new Zt(e.id)}return t}(t);null!==a&&e.handle(a)}),n.appendChild(a)})}function en(e,t){var n=document.getElementById("layers-palette");null!=n&&t.forEach(function(t){var a="layer-".concat(t.id),r=document.createElement("div");r.setAttribute("class","layer");var o=document.createElement("label");o.setAttribute("for",a),o.textContent="".concat(t.name||t.id," "),r.appendChild(o);var i=document.createElement("input");i.setAttribute("type","checkbox"),t.isActive&&i.setAttribute("checked","checked"),i.setAttribute("id",a),i.addEventListener("click",function(n){var a=n.target,r=function(e,t){return new Xt(e.id,t)}(t,a.checked);null!==r&&e.handle(r)}),r.appendChild(i),n.appendChild(r)})}function tn(e){if(null!==e)for(;0<e.children.length;){var t=e.children.item(0);null!==t&&e.removeChild(t)}}Xt.KIND="toggleLayer",n(313);var nn=function(){function e(t){Object(s.a)(this,e),this.diagramServer=void 0,this.diagramServer=t}return Object(l.a)(e,[{key:"handle",value:function(e){this.handleSetLayersAction(e)}},{key:"handleSetLayersAction",value:function(e){tn(document.getElementById("layers-palette")),en(this.diagramServer,e.layers)}}]),e}(),an=function(){function e(t){Object(s.a)(this,e),this.diagramServer=void 0,this.diagramServer=t}return Object(l.a)(e,[{key:"handle",value:function(e){this.handleSetToolsAction(e)}},{key:"handleSetToolsAction",value:function(e){var t=e.tools.filter(function(e){return function(e){var t=!1;switch(e.toolType){case Gt.TYPE:case Jt.TYPE:case Zt.TYPE:t=!0;break;default:t=!1}return t}(e)});tn(document.getElementById("tools-palette")),Qt(this.diagramServer,t)}}]),e}();var rn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).siriusDom=void 0,n.state={representation:null},n.siriusDom=r.a.createRef(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.state.representation;return e=void 0!==t&&null!==t?r.a.createElement("div",null):r.a.createElement(lt.a,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"diagram-main"},r.a.createElement("div",{ref:this.siriusDom,id:"sirius",className:"sprotty"},e)),r.a.createElement("div",{className:"palette-main"},r.a.createElement("h2",null,"Layers"),r.a.createElement("div",{id:"layers-palette"})))}},{key:"componentDidMount",value:function(){var e=this,t=this.siriusDom.current;if(null!=t){var n=this.props,a=n.resource,r=n.representationName;ft(a).then(function(n){n.representations.forEach(function(a){if(r===a.name)return e.setState({representation:a}),void function(e,t,n,a,r){var o=new WebSocket("ws://"+a+"/diagrams/api"),i=Ht(r),c=i.get(yt.TYPES.ModelSource);c.listen(o);var s=i.get(yt.TYPES.ActionHandlerRegistry);s.register(wt.KIND,new nn(c)),s.register(Nt.KIND,new an(c)),o.addEventListener("open",function(a){var r=new URL(window.location.href),o=new URLSearchParams(r.search),i=o.get("project")||e,s=o.get("aird")||t,l=o.get("representationName")||n;c.clientId="__PROJECT__".concat(i,"__AIRD__").concat(s,"__REPRESENTATION__").concat(l,"__CLIENT_ID__").concat(Math.random()),c.handle(new Et),c.handle(new Ot),c.handle(new yt.RequestModelAction({project:i,aird:s,representationName:l}))})}(n.project,n.name,a.name,"".concat(A,":").concat("8080"),t.id)})})}}}]),t}(a.Component),on=Object(we.a)(rn),cn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleRefresh=function(){n.refresh()},n.state={resources:[]},n.handleDelete=n.handleDelete.bind(Object(f.a)(n)),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e){this.props.resource.path!==e.resource.path&&this.refresh()}},{key:"refresh",value:function(){var e=this;(function(e){return _.query({query:R()(Ve()),variables:{projectName:e.project,filePath:e.path}}).then(function(t){var n=t.data.viewer.project.resourceByPath.resources.edges,a=[];return n.forEach(function(t){var n=t.node.name,r=t.node.path,o=t.node.__typename;a.push(new De(e.project,n,r,"Folder"===o))}),a})})(this.props.resource).then(function(t){e.setState({resources:t})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(se.a,{component:"nav"},this.state.resources.map(function(t){return r.a.createElement(ue.a,{button:!0,key:t.name,onClick:function(){e.props.history.push("/"+t.project+"/"+encodeURIComponent(t.path))}},r.a.createElement(he.a,null,r.a.createElement(je.a,null,t.isFolder?r.a.createElement(Ee.a,null):r.a.createElement(Pe.a,null))),r.a.createElement(me.a,{primary:t.name}),r.a.createElement(ve.a,null,r.a.createElement(k.a,{"aria-label":"Delete",onClick:e.handleDelete.bind(e,t)},r.a.createElement(ye.a,null))))})),r.a.createElement(qe,Object.assign({},this.props,{container:this.props.resource,onRefresh:this.handleRefresh.bind(this)})),r.a.createElement(qe,Object.assign({},this.props,{folder:!0,container:this.props.resource,onRefresh:this.handleRefresh.bind(this)})))}},{key:"handleDelete",value:function(e){var t=this;Ue(e).then(function(e){e&&t.refresh()})}}]),t}(a.Component),sn=Object(we.a)(cn),ln=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={resource:null},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.projectName,a=t.resourcePath,o=Object(ke.a)(t,["projectName","resourcePath"]),i=this.state.resource;return e=null!==i?i.isFolder?r.a.createElement(sn,{resource:i}):a.endsWith(".nabla")?r.a.createElement(ct,Object.assign({},o,{project:n,resource:i})):a.endsWith(".aird")?void 0!==this.props.representationName?r.a.createElement(on,Object.assign({},o,{resource:i,representationName:this.props.representationName})):r.a.createElement(gt,Object.assign({},o,{resource:i})):r.a.createElement(ut,Object.assign({},o,{resource:i})):r.a.createElement(lt.a,null),r.a.createElement("div",null,r.a.createElement(ie,{projectName:n,resourcePath:a,representationName:this.props.representationName}),e)}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.projectName,a=t.resourcePath;n===e.projectName&&a===e.resourcePath||this.refresh()}},{key:"refresh",value:function(){var e,t,n=this;(e=this.props.projectName,t=this.props.resourcePath,_.query({query:R()(Ke()),variables:{projectName:e,filePath:t}}).then(function(t){var n=t.data.viewer.project.resourceByPath,a=n.name,r=n.path,o=n.__typename;return new De(e,a,r,"Folder"===o)})).then(function(e){n.setState({resource:e})})}}]),t}(a.Component),un=Object(v.withStyles)(function(e){return{}})(ln);var dn=n(357),hn=n.n(dn),pn=n(358),mn=n.n(pn),fn=n(356),vn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,servicesAvailable:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(L,{method:"get",mode:"no-cors"}).then(function(){return!0}).catch(function(e){return!1}).then(function(t){e.setState({loading:!1,servicesAvailable:t})})}},{key:"render",value:function(){var e=this.props.classes;return this.state.loading?r.a.createElement("div",null,"Loading..."):this.state.servicesAvailable?r.a.createElement("div",{className:"App"},r.a.createElement(hn.a,{position:"static",color:"default"},r.a.createElement(mn.a,null,r.a.createElement(E.a,{variant:"h4",color:"inherit"},"NabLab (v",fn.a,")"))),r.a.createElement("div",{className:e.content},r.a.createElement(p.a,null,r.a.createElement(m.a,{exact:!0,path:"/",component:Se}),r.a.createElement(m.a,{path:"/:projectName/:resourcePath/:representationName",render:function(e){for(var t=e.match,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return r.a.createElement(un,Object.assign({},a,{projectName:t.params.projectName,resourcePath:decodeURIComponent(t.params.resourcePath),representationName:t.params.representationName}))}}),r.a.createElement(m.a,{path:"/:projectName/:resourcePath",render:function(e){for(var t=e.match,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return r.a.createElement(un,Object.assign({},a,{projectName:t.params.projectName,resourcePath:decodeURIComponent(t.params.resourcePath)}))}}),r.a.createElement(m.a,{path:"/:projectName",render:function(e){for(var t=e.match,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return r.a.createElement(We,Object.assign({},a,{projectName:t.params.projectName}))}})))):r.a.createElement("div",null,"Cannot fetch the server")}}]),t}(a.Component),bn=Object(v.withStyles)(function(e){return{root:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,marginTop:1*e.spacing.unit,padding:"".concat(2*e.spacing.unit,"px 0"),"background-color":"#f5f5f5"},content:{"min-height":"700px"}}})(vn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(52);i.a.render(r.a.createElement(c.a,null,r.a.createElement(bn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[361,2,1]]]);
//# sourceMappingURL=main.04a6dd47.chunk.js.map